<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="_en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.5" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.5">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.5">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.5">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.5" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.0.5',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  
  <meta name="keywords" content="Hexo, my world." />


<meta name="description" content="对目前工作的思考相关工作简述 There are a variety of models that capture and produce such a distribution, each fitting different types of time series signal behaviors. For exa">
<meta property="og:type" content="article">
<meta property="og:title" content="2018Spring-Week7-Anomaly Detection Review">
<meta property="og:url" content="https://www.luodian.ink/2018-04-12/2018Spring-Week7-Anomaly-Detection-Review/index.html">
<meta property="og:site_name" content="Luodian.ink">
<meta property="og:description" content="对目前工作的思考相关工作简述 There are a variety of models that capture and produce such a distribution, each fitting different types of time series signal behaviors. For example, time series models such as HoltWin">
<meta property="og:locale" content="_en">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tKfTcly1fq9o9x2ayaj31880laaeg.jpg">
<meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcly1fq9oougvo3j311q0ws0xs.jpg">
<meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcly1fq9o7gltqyj31aw0i478o.jpg">
<meta property="og:image" content="https://segmentfault.com/img/bVO0C3?w=627&h=257">
<meta property="og:updated_time" content="2018-04-23T09:46:55.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="2018Spring-Week7-Anomaly Detection Review">
<meta name="twitter:description" content="对目前工作的思考相关工作简述 There are a variety of models that capture and produce such a distribution, each fitting different types of time series signal behaviors. For example, time series models such as HoltWin">
<meta name="twitter:image" content="https://ws3.sinaimg.cn/large/006tKfTcly1fq9o9x2ayaj31880laaeg.jpg">






  <link rel="canonical" href="https://www.luodian.ink/2018-04-12/2018Spring-Week7-Anomaly-Detection-Review/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>
  <title>2018Spring-Week7-Anomaly Detection Review | Luodian.ink</title>
  




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110144268-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-110144268-1');
</script>






  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="_en">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Luodian.ink</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Home</a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-user"></i> <br />About</a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />Tags</a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-th"></i> <br />Categories</a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />Commonweal 404</a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />Search</a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.luodian.ink/2018-04-12/2018Spring-Week7-Anomaly-Detection-Review/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Luodian">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/my_face.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Luodian.ink">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">2018Spring-Week7-Anomaly Detection Review</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-12T11:10:03+08:00">2018-04-12</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/异常检测/" itemprop="url" rel="index"><span itemprop="name">异常检测</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018-04-12/2018Spring-Week7-Anomaly-Detection-Review/" class="leancloud_visitors" data-flag-title="2018Spring-Week7-Anomaly Detection Review">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="对目前工作的思考"><a href="#对目前工作的思考" class="headerlink" title="对目前工作的思考"></a>对目前工作的思考</h3><h4 id="相关工作简述"><a href="#相关工作简述" class="headerlink" title="相关工作简述"></a>相关工作简述</h4><ol>
<li><p><strong>There are a variety of models that capture and produce such a distribution</strong>, each fitting different types of time series signal behaviors. For example, time series models such as HoltWinters, ARIMA models, and Hidden Markov Models, all capture temporal dynamics of a time series and produce a generative distribution for predicting the ranges of future values. But can these models be used for any type of signal? The answer is no - each model comes with its own assumptions, affecting what type of signal can be fitted well with it. <strong>For example, ARIMA and Holt-Winters models assume the the time series is ergodic, with a noise model that is Gaussian.</strong> A Markov model makes assumption on the memory of the process (current state depends only on previous state), and so on.</p>
</li>
<li><p>Let’s say the definition of an anomalous data point is one that deviates by a certain standard deviation from the mean.</p>
</li>
<li><p>$P_{Normal}(X_t  |  X_{t-1}, \ldots X_0)$ such that we can determine the likelihood of the data point $X_{t+1}$ to have originated from $P_{Normal}(X_{t+1}  |  X_{t+1} , X_{t-1}, \ldots X_0)$.</p>
</li>
<li><p>Once we choose the model that would describe the metric the best, we must fit the best model parameters for it. Depending on the type of model, this step may take different forms - we use maximum likelihood estimation (MLE) for this step.</p>
</li>
<li><p>关注到一个做异常检测的公司：Anodot</p>
<p><a href="https://www.youtube.com/watch?time_continue=37&amp;v=XLPQu5DAoHs" target="_blank" rel="noopener">Anodot Real Time Anomaly Detection</a></p>
<p>数据提取-数据分析-异常检测-报告提醒，一条龙服务的公司</p>
<p>有一篇相关的论文写得非常的好，Real-time anomaly detection system for time series at scale, KDD 2017</p>
<p><img src="https://ws3.sinaimg.cn/large/006tKfTcly1fq9o9x2ayaj31880laaeg.jpg" alt=""></p>
</li>
</ol>
<h4 id="思路修正"><a href="#思路修正" class="headerlink" title="思路修正"></a>思路修正</h4><ol>
<li><p>Seasonality detection可能是有必要的，不能简单地说机器的数据没有季节性。</p>
<blockquote>
<p>The purpose of seasonality detection is to automatically find the seasonal patterns present in the time series. But we are facing to several challenges.</p>
<ol>
<li>In the context of business data, typical seasonal periods are linked to human activity : weekly, daily, hourly, etc. <strong>The range of possible seasons is large : from 10^3s to 10^6s, which is three order of magnitude</strong> - this imposes a challenge to standard algorithms.</li>
<li>An algorithm must be robust to anomalies. One cannot assume that the anomalies are not present in the data used to detect seasonal patterns.</li>
<li>Multiple seasonal patterns in the time series, at low and high frequencies are challenging as high frequency seasonal patterns may prevent accurate detection of the lower frequency patterns (which we care about the most for time series modeling).</li>
<li>An algorithm must be efficient in CPU and memory, otherwise it cannot be applied to millions of metrics.</li>
<li>The algorithm must be robust to various types of unexpected conditions, such as missing data, pattern changes, etc.</li>
</ol>
</blockquote>
<p>其中对我们来说最主要的困难是，1和2。即假设异常存在的情况如何检验周期性。</p>
<p>目前的方法主要还是ACF那一套（对序列做频解分析），不是很熟，得仔细思考怎么应用。</p>
<p><img src="https://ws2.sinaimg.cn/large/006tKfTcly1fq9oougvo3j311q0ws0xs.jpg" alt=""></p>
</li>
</ol>
<h4 id="其余方法"><a href="#其余方法" class="headerlink" title="其余方法"></a>其余方法</h4><ol>
<li>简单的情况：SMA+LOW FILTER.</li>
<li>复杂一点的方法：<strong>Moving Average Using Discrete Linear Convolution</strong></li>
<li>SCREEN：有用，但是处理过程稍显复杂，可以尝试用它来做比较</li>
</ol>
<blockquote>
<p>咱们的模型使用的是统计学方法，数据假设服从高斯分布，当数据偏离中心过多时，被标注为异常， 这里说明了这类生成式模型（不知道可不可以这么说）的数学应用背景。</p>
</blockquote>
<h3 id="异常情况分类"><a href="#异常情况分类" class="headerlink" title="异常情况分类"></a>异常情况分类</h3><ol>
<li><p><strong>Point anomalies:</strong> A single instance of data is anomalous if it’s too far off from the rest. <em>Business use case:</em> Detecting credit card fraud based on “amount spent.”</p>
</li>
<li><p><strong>Contextual anomalies:</strong> The abnormality is context specific. This type of anomaly is common in time-series data. </p>
<ul>
<li><em>Business use case:</em> Spending $100 on food every day during the holiday season is normal, but may be odd otherwise.</li>
</ul>
</li>
<li><p><strong>Collective anomalies:</strong> A set of data instances collectively helps in detecting anomalies. </p>
<ul>
<li>Business use case: Someone is trying to copy data form a remote machine to a local host unexpectedly, an anomaly that would be flagged as a potential cyber attack. </li>
</ul>
</li>
<li><p><strong>Normal Behavior分类</strong></p>
<p><img src="https://ws2.sinaimg.cn/large/006tKfTcly1fq9o7gltqyj31aw0i478o.jpg" alt=""></p>
</li>
</ol>
<h3 id="异常检测方法的分类（可以用作论文补充）"><a href="#异常检测方法的分类（可以用作论文补充）" class="headerlink" title="异常检测方法的分类（可以用作论文补充）"></a>异常检测方法的分类（可以用作论文补充）</h3><ol>
<li><strong>Statistical Methods</strong><ol>
<li>Holt-Winters Chatfield (1978).</li>
<li>classical ARIMA and seasonal ARIMA models Chatfield (2016).</li>
</ol>
</li>
<li><strong>Density-Based Anomaly Detection </strong></li>
<li><strong>Clustering-Based Anomaly Detection </strong></li>
<li><strong>Support Vector Machine-Based Anomaly Detection </strong></li>
<li><strong>Moving Average Using Discrete Linear Convolution</strong></li>
</ol>
<h3 id="异常检测的用途"><a href="#异常检测的用途" class="headerlink" title="异常检测的用途"></a>异常检测的用途</h3><p>Some of the important applications of time series anomaly detection are :</p>
<ol>
<li>Detecting anomalous heart beat pulses using ECG data (8; 9) : Usually ECGdata can be seen as a periodic time series. An anomaly in this case would be thenon-conforming pattern e.g., in terms of periodicity or amplitude, which couldindicate a health problem.</li>
<li>Attack detection in recommender systems : Shilling attacks, in which the attackersintroduce biased ratings in order to influence future recommendations (10).</li>
<li>Detection of anomalous flight sequences using sensor data from aircrafts: Typicalsystem behavior of flights is characterized by the sensor data information of dif-ferent parameters which change during the course of flight. Any deviation fromthe typical system behavior us anomalous (11).</li>
<li>Shape anomalies : Finding the shapes which interestingly differ from others, whereeach shape is converted to a time series (12; 13). In the field of medical datamining, given several shapes of a species, a shape that differs from others mightindicate an anomaly caused by genetic mutation. In anthropological data mining,different shapes of interest can be pottery, bones, arrowheads etc.</li>
<li>Outlier light curves in catalogs of periodic stars : Detection of outliers in periodicvariable stars involves finding the statistical deviance from the rest. The out-liers correspond to some interesting intrinsic physical differences, such as slowly changing period or amplitude, which introduce noise in the light curve.</li>
<li>Eco-system disturbances using earth science data such as vegetation or temperature.</li>
</ol>
<h3 id="LSTM用法"><a href="#LSTM用法" class="headerlink" title="LSTM用法"></a>LSTM用法</h3><h4 id="Training-with-sliding-windows"><a href="#Training-with-sliding-windows" class="headerlink" title="Training with sliding windows"></a>Training with sliding windows</h4><blockquote>
<p>这是Uber的做法，<a href="https://eng.uber.com/neural-networks/" target="_blank" rel="noopener">https://eng.uber.com/neural-networks/</a></p>
</blockquote>
<p>The training dataset for our neural network required <a href="https://en.wikipedia.org/wiki/Convolutional_neural_network" target="_blank" rel="noopener">sliding windows</a> X (input) and Y (output) of desired lag (e.g., input size), as well as a forecast horizon. Using these two windows, we trained a neural network by minimizing a <a href="https://en.wikipedia.org/wiki/Loss_function" target="_blank" rel="noopener">loss function</a>, such as <a href="https://en.wikipedia.org/wiki/Mean_squared_error" target="_blank" rel="noopener">Mean Squared Error</a>.</p>
<p>Both the X and Y windows slide by a single increment to generate training data, as demonstrated below:</p>
<p><img src="https://segmentfault.com/img/bVO0C3?w=627&amp;h=257" alt=""></p>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018-03-30/随想-皇后大道东/" rel="next" title="随想-皇后大道东">
                <i class="fa fa-chevron-left"></i> 随想-皇后大道东
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018-05-01/Review for week-9：cs231n-Lecture-2/" rel="prev" title="Review for Week-9：cs231n-Lecture-2">
                Review for Week-9：cs231n-Lecture-2 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/my_face.png"
                alt="Luodian" />
            
              <p class="site-author-name" itemprop="name">Luodian</p>
              <p class="site-description motion-element" itemprop="description">Hello, my world.</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">45</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">3</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/Luodian" target="_blank" title="GitHub"><i class="fa fa-fw fa-globe"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://twitter.com/naidoul" target="_blank" title="Twitter"><i class="fa fa-fw fa-globe"></i>Twitter</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://weibo.com/2657993174/profile?rightmod=1&wvr=6&mod=personinfo&is_all=1" target="_blank" title="Weibo"><i class="fa fa-fw fa-globe"></i>Weibo</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://www.zhihu.com/people/luo-dian-zhu-84/activities" target="_blank" title="zhihu"><i class="fa fa-fw fa-globe"></i>zhihu</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#对目前工作的思考"><span class="nav-number">1.</span> <span class="nav-text">对目前工作的思考</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#相关工作简述"><span class="nav-number">1.1.</span> <span class="nav-text">相关工作简述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#思路修正"><span class="nav-number">1.2.</span> <span class="nav-text">思路修正</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#其余方法"><span class="nav-number">1.3.</span> <span class="nav-text">其余方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#异常情况分类"><span class="nav-number">2.</span> <span class="nav-text">异常情况分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#异常检测方法的分类（可以用作论文补充）"><span class="nav-number">3.</span> <span class="nav-text">异常检测方法的分类（可以用作论文补充）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#异常检测的用途"><span class="nav-number">4.</span> <span class="nav-text">异常检测的用途</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LSTM用法"><span class="nav-number">5.</span> <span class="nav-text">LSTM用法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Training-with-sliding-windows"><span class="nav-number">5.1.</span> <span class="nav-text">Training with sliding windows</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Luodian</span>

  

  
</div>











        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>












  















  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.5"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.5"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.0.5"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.0.5"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.5"></script>



  



	





  





  










  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("P3KDAQ4HdXF3uAgiKSHuWo12-gzGzoHsz", "zmMRXMn5P4sO2kcK5UBY6F6g");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            
            counter.save(null, {
              success: function(counter) {
                
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(counter.get('time'));
                
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            
              var newcounter = new Counter();
              /* Set ACL */
              var acl = new AV.ACL();
              acl.setPublicReadAccess(true);
              acl.setPublicWriteAccess(true);
              newcounter.setACL(acl);
              /* End Set ACL */
              newcounter.set("title", title);
              newcounter.set("url", url);
              newcounter.set("time", 1);
              newcounter.save(null, {
                success: function(newcounter) {
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
                },
                error: function(newcounter, error) {
                  console.log('Failed to create');
                }
              });
            
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  
  

  
    
      <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->

    
  


  
  

  

  

  

  

</body>
</html>
